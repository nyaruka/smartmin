{% load smartmin %}

{% with form|field:field as form_field %}
{% getblock "before_field_" field %}

{% if form_field and form_field.is_hidden %}
{{ form_field }}
{% else %}
{% if form_field %}
<div class="clearfix form-field {% if form_field.errors %}error{% endif %}">
  <label for="{{ field.name }}">{% get_label field %}</label>
  <div class="input">{{ form_field }}
    {% with view|field_help:field as help %}
    {% if help %}
    <span class="help-block">{{ help }}</span>
    {% endif %}
    {% endwith %}
    
    {% if form_field.errors %}
    <span class="help-block field-errors">{{ form_field.errors }}</span>
    {% endif %}
  </div>
</div>
{% else %}
<div class="clearfix form-field">
  <label for="{{ field.name }}">{% get_label field %}</label>
  <div class="input">
    <span class="uneditable-input">{% get_value_from_view field %}</span>
    {% with view|field_help:field as help %}
    {% if help %}
    <span class="help-block">{{ help }}</span>
    {% endif %}
    {% endwith %}
  </div>
</div>
{% endif %}
{% endif %}

{% getblock "after_field_" field %}

{% endwith %}
